{% extends "base.html" %}

{% block title %}Admin - Chatty Foods{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <h1 class="text-3xl font-bold mb-8">Admin</h1>

    <div class="space-y-8">
        <!-- Upload JSON -->
        <section>
            <h2 class="text-lg font-semibold mb-3">Upload JSON</h2>
            <form method="POST" action="/admin/upload">
                <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                <textarea name="json_data" rows="10" placeholder='Paste recipe or tip JSON here...'
                    class="w-full px-3 py-2.5 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent font-mono text-sm">{{ request.form.get('json_data', '') }}</textarea>
                {% if upload_error %}
                <p class="mt-2 text-sm text-red-600 dark:text-red-400">{{ upload_error }}</p>
                {% endif %}
                {% if upload_success %}
                <p class="mt-2 text-sm text-emerald-600 dark:text-emerald-400">{{ upload_success }}</p>
                {% endif %}
                <button type="submit"
                    class="mt-3 px-5 py-2.5 rounded-lg bg-emerald-600 text-white font-medium hover:bg-emerald-700 transition-colors text-sm">
                    Upload
                </button>
            </form>
        </section>

        <!-- Export -->
        <section class="pt-6 border-t border-gray-200 dark:border-gray-800">
            <h2 class="text-lg font-semibold mb-3">Export Data</h2>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">Download all recipes and tips as a JSON file.</p>
            <a href="/admin/export"
                class="inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium border border-gray-200 dark:border-gray-700 text-emerald-600 dark:text-emerald-400 hover:border-emerald-400 dark:hover:border-emerald-500 transition-colors">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                Download JSON
            </a>
        </section>

        <!-- Log out -->
        <section class="pt-6 border-t border-gray-200 dark:border-gray-800">
            <a href="/logout"
                class="inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700 hover:text-gray-900 dark:hover:text-white hover:border-gray-400 dark:hover:border-gray-500 transition-colors">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                Log out
            </a>
        </section>
    </div>
</div>
{% endblock %}
